# ü™Ç Telegram Weather Bot –¥–ª—è –ø–∞—Ä–∞–ø–ª–∞–Ω–µ—Ä–∏—Å—Ç–æ–≤

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–≥–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–ª—ë—Ç–æ–≤ –Ω–∞ –ø–∞—Ä–∞–ø–ª–∞–Ω–µ –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (OpenWeather –∏ VisualCrossing) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –ª—ë—Ç–Ω–æ–π –ø–æ–≥–æ–¥—ã.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–≥–æ–¥—ã –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö API (OpenWeather –∏ VisualCrossing)
- ‚úÖ –£—Å–ª–æ–≤–∏—è —Å—á–∏—Ç–∞—é—Ç—Å—è –ª—ë—Ç–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–±–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª—ë—Ç–Ω–æ–π –ø–æ–≥–æ–¥–µ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞ –Ω–µ–ª—ë—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª–æ–∫–∞—Ü–∏–π –¥–ª—è –æ–¥–Ω–æ–≥–æ —á–∞—Ç–∞/–∫–∞–Ω–∞–ª–∞
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ SQLite
- ‚úÖ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ª—ë—Ç–Ω–æ–π –ø–æ–≥–æ–¥—ã

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è |
|----------|----------|-----------------|
| –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | 5¬∞C - 35¬∞C |
| –í–ª–∞–∂–Ω–æ—Å—Ç—å | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | ‚â§85% |
| –°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | ‚â§8 –º/—Å |
| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ç—Ä–∞ | –î–æ–ø—É—Å—Ç–∏–º—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è | [0, 45, 315]¬∞ |
| –ü–æ—Ä—ã–≤—ã –≤–µ—Ç—Ä–∞ | –ù–µ –±–æ–ª–µ–µ 1.5√ó –º–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç–∏ | ‚â§12 –º/—Å |
| –¢–æ—á–∫–∞ —Ä–æ—Å—ã | –ú–∏–Ω. —Ä–∞–∑–Ω–∏—Ü–∞ —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π | ‚â•2¬∞C |
| –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Å–∞–¥–∫–æ–≤ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | ‚â§20% |
| –û–±–ª–∞—á–Ω–æ—Å—Ç—å | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | ‚â§80% |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ú–∏–Ω. –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö —á–∞—Å–æ–≤ | 4 —á–∞—Å–∞ |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π **—Ç–æ–∫–µ–Ω –±–æ—Ç–∞**

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–µ–π

#### OpenWeatherMap
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [openweathermap.org](https://openweathermap.org/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [API Keys](https://home.openweathermap.org/api_keys)
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

#### VisualCrossing
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [visualcrossing.com](https://www.visualcrossing.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Account](https://www.visualcrossing.com/account)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à API-–∫–ª—é—á

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd TGWeatherBot

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env`:

```env
# Telegram Bot
BOT_TOKEN=your_telegram_bot_token_here

# Weather API Keys
OPENWEATHER_API_KEY=your_openweather_api_key_here
VISUALCROSSING_API_KEY=your_visualcrossing_api_key_here

# Settings
TIMEZONE=Europe/Moscow
POLLING_INTERVAL_MINUTES=30
API_REQUEST_DELAY_SECONDS=2
LOG_LEVEL=INFO
DATABASE_PATH=database/weather_bot.db

# Optional: Global admin user IDs (comma-separated)
ADMIN_USER_IDS=123456789
```

### 4. –ó–∞–ø—É—Å–∫ —Å Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

**–ü—Ä–∞–≤–∞ –Ω–∞ –ë–î –ø—Ä–∏ Docker:** –µ—Å–ª–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ª–æ–∫–∞—Ü–∏–∏ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ `sqlite3.OperationalError: attempt to write a readonly database`, –Ω–∞ —Ö–æ—Å—Ç–µ –≤—ã–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥ —Å –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (UID 1000):

```bash
sudo chown -R 1000:1000 ./database
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤ /srv/docker/TGWeatherBot:
sudo chown -R 1000:1000 /srv/docker/TGWeatherBot/database
```

### 5. –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python -m bot.main
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª

1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≤–∞—à –∫–∞–Ω–∞–ª –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
2. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ü–æ–ª—É—á–∏—Ç–µ `chat_id` –∫–∞–Ω–∞–ª–∞:
   - –ü–µ—Ä–µ—à–ª–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API: `https://api.telegram.org/bot<TOKEN>/getUpdates`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/set_config`

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º |
| `/list_locations` | –°–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π |
| `/status` | –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–≥–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π |
| `/check` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≥–æ–¥—ã |
| `/get_config` | –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `/set_config` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞—Ü–∏–∏ (JSON) |

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞—Ü–∏–π

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/set_config` –∏ –∑–∞—Ç–µ–º JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```json
{
  "locations": [
    {
      "name": "–Æ—Ü–∞",
      "latitude": 43.9234,
      "longitude": 42.7345,
      "time_window_start": 8,
      "time_window_end": 18,
      "temp_min": 5,
      "humidity_max": 85,
      "wind_speed_max": 8,
      "wind_directions": [0, 45, 315],
      "wind_direction_tolerance": 45,
      "dew_point_spread_min": 2,
      "required_conditions_duration_hours": 4,
      "precipitation_probability_max": 20,
      "cloud_cover_max": 80
    },
    {
      "name": "–ß–µ–≥–µ–º",
      "latitude": 43.4234,
      "longitude": 43.2345,
      "time_window_start": 9,
      "time_window_end": 17,
      "temp_min": 10,
      "humidity_max": 80,
      "wind_speed_max": 6,
      "wind_directions": [],
      "wind_direction_tolerance": 45,
      "dew_point_spread_min": 3,
      "required_conditions_duration_hours": 3,
      "precipitation_probability_max": 15,
      "cloud_cover_max": 70
    }
  ],
  "notifications_enabled": true
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `name` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `latitude` | float | –®–∏—Ä–æ—Ç–∞ (-90 –¥–æ 90) | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `longitude` | float | –î–æ–ª–≥–æ—Ç–∞ (-180 –¥–æ 180) | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `time_window_start` | int | –ù–∞—á–∞–ª–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ (0-23) | 8 |
| `time_window_end` | int | –ö–æ–Ω–µ—Ü –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ (0-23) | 18 |
| `temp_min` | float | –ú–∏–Ω. —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ¬∞C | 5.0 |
| `humidity_max` | float | –ú–∞–∫—Å. –≤–ª–∞–∂–Ω–æ—Å—Ç—å % | 85.0 |
| `wind_speed_max` | float | –ú–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞ –º/—Å | 8.0 |
| `wind_directions` | array | –î–æ–ø—É—Å—Ç–∏–º—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö | [] (–≤—Å–µ) |
| `wind_direction_tolerance` | int | –î–æ–ø—É—Å–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è ¬±¬∞ | 45 |
| `dew_point_spread_min` | float | –ú–∏–Ω. —Ä–∞–∑–Ω–∏—Ü–∞ —Å —Ç–æ—á–∫–æ–π —Ä–æ—Å—ã ¬∞C | 2.0 |
| `required_conditions_duration_hours` | int | –¢—Ä–µ–±—É–µ–º–æ–µ –∫–æ–ª-–≤–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö —á–∞—Å–æ–≤ | 4 |
| `precipitation_probability_max` | float | –ú–∞–∫—Å. –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Å–∞–¥–∫–æ–≤ % | 20.0 |
| `cloud_cover_max` | float | –ú–∞–∫—Å. –æ–±–ª–∞—á–Ω–æ—Å—Ç—å % | 80.0 |

### –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ç—Ä–∞

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö:
- 0¬∞ / 360¬∞ ‚Äî –°–µ–≤–µ—Ä (–°)
- 45¬∞ ‚Äî –°–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ–∫ (–°–í)
- 90¬∞ ‚Äî –í–æ—Å—Ç–æ–∫ (–í)
- 135¬∞ ‚Äî –Æ–≥–æ-–≤–æ—Å—Ç–æ–∫ (–Æ–í)
- 180¬∞ ‚Äî –Æ–≥ (–Æ)
- 225¬∞ ‚Äî –Æ–≥–æ-–∑–∞–ø–∞–¥ (–Æ–ó)
- 270¬∞ ‚Äî –ó–∞–ø–∞–¥ (–ó)
- 315¬∞ ‚Äî –°–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥ (–°–ó)

–ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º—ã –≤—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## –õ–æ–≥–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–õ—ë—Ç–Ω–æ"
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞:
- –û–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (OpenWeather –∏ VisualCrossing) –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ª—ë—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –ù–∞–π–¥–µ–Ω –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç—Ä–µ–±—É–µ–º–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–°—Ç–∞–ª–æ –Ω–µ –ª—ë—Ç–Ω–æ"
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞:
1. –†–∞–Ω–µ–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–õ—ë—Ç–Ω–æ"
2. –ü–æ—Å–ª–µ–¥–Ω–∏–µ **–¥–≤–µ** –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ä—è–¥ –ø–æ–∫–∞–∑–∞–ª–∏ –Ω–µ–ª—ë—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TGWeatherBot/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py            # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py        # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ weather/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openweather.py   # –ö–ª–∏–µ–Ω—Ç OpenWeather API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ visualcrossing.py # –ö–ª–∏–µ–Ω—Ç VisualCrossing API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analyzer.py      # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config_handler.py # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ /set_config
‚îÇ   ‚îî‚îÄ‚îÄ notifications/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ notifier.py      # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ templates.py     # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π

### –õ—ë—Ç–Ω–∞—è –ø–æ–≥–æ–¥–∞
```
‚úÖü™Ç –õ–Å–¢–ù–ê–Ø –ü–û–ì–û–î–ê!

üìç –õ–æ–∫–∞—Ü–∏—è: –Æ—Ü–∞
üìÖ –î–∞—Ç–∞: 2024-01-15
‚è∞ –õ—ë—Ç–Ω–æ–µ –æ–∫–Ω–æ: 10:00 ‚Äî 16:00 (6 —á.)

–£—Å–ª–æ–≤–∏—è:
üå° –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 5¬∞C ‚Äî 35¬∞C
üí® –í–µ—Ç–µ—Ä: 4.2 –º/—Å, –°–í
üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: –¥–æ 85%
üå§ –û–±–ª–∞—á–Ω–æ—Å—Ç—å: –¥–æ 80%

–î–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã –¥–≤—É–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
–û–±–Ω–æ–≤–ª–µ–Ω–æ: 08:30 15.01.2024
```

### –ù–µ –ª—ë—Ç–Ω–∞—è –ø–æ–≥–æ–¥–∞
```
‚ùåüåßÔ∏è –°–¢–ê–õ–û –ù–ï –õ–Å–¢–ù–û

üìç –õ–æ–∫–∞—Ü–∏—è: –Æ—Ü–∞
üìÖ –î–∞—Ç–∞: 2024-01-15

–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã:
‚Ä¢ üí® –°–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä: 12.5 –º/—Å (–º–∞–∫—Å. 8 –º/—Å)
‚Ä¢ üåß –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Å–∞–¥–∫–æ–≤: 65% (–º–∞–∫—Å. 20%)

–¢–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è:
üå° –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 18.5¬∞C
üí® –í–µ—Ç–µ—Ä: 12.5 –º/—Å, 270¬∞
üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: 72%
üå§ –û–±–ª–∞—á–Ω–æ—Å—Ç—å: 85%

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 14:30 15.01.2024
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|----------|-------------|
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ | ‚úÖ |
| `OPENWEATHER_API_KEY` | API –∫–ª—é—á OpenWeather | ‚úÖ |
| `VISUALCROSSING_API_KEY` | API –∫–ª—é—á VisualCrossing | ‚úÖ |
| `TIMEZONE` | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: UTC |
| `POLLING_INTERVAL_MINUTES` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30 |
| `API_REQUEST_DELAY_SECONDS` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É API –∑–∞–ø—Ä–æ—Å–∞–º–∏ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2 |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: INFO |
| `DATABASE_PATH` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: database/weather_bot.db |
| `ADMIN_USER_IDS` | ID –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∞–¥–º–∏–Ω–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `BOT_TOKEN` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç/–∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –≤–∞—à–µ–≥–æ –ø–ª–∞–Ω–∞ API
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ª–æ–∫–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `notifications_enabled: true` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–æ–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞ (`is_active: true`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è. –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.
